C nested loops and functions: writting local functions that performs different tasks.
